# Render deploy for `rust-bot_MAXI5.py` (long polling, no DB/disks)

Эта конфигурация разворачивает бота как **Background Worker** на Render без БД и без дисков.
Токен НЕ меняем — он остаётся в коде, как ты просил.

## Что внутри
- `requirements.txt` — зависимости.
- `render.yaml` — описание сервиса для Render (Blueprint).
- `boot_init.py` — создаёт нужные файлы/папки при старте (на случай чистого деплоя).

## Почему так
У Render **эфемерная** файловая система: данные сохраняются, пока запущен один и тот же деплой.
**Новый деплой** очищает файловую систему. Чтобы не терять файлы между деплоями:
- В `render.yaml` стоит `autoDeploy: false`. Обновляй вручную только когда нужно.
- На рестартах (без деплоя) файлы обычно сохраняются.

## Деплой через Blueprint
1. Залей в репозиторий `rust-bot_MAXI5.py`, `requirements.txt`, `render.yaml`, `boot_init.py`.
2. На Render: **New + → Blueprint** → URL твоего репозитория.
3. Render создаст воркер `rust-bot`. Нажми **Apply**.
4. Будет выполнено:
   - Build: `pip install -r requirements.txt`
   - Start: `python boot_init.py && python rust-bot_MAXI5.py`

## Где лежат файлы
Все файлы (`user_ids.json`, `user_settings.json`, `price.json`, `cache.json`, `stats.json`, папка `temp_images`) лежат рядом с кодом приложения.
`boot_init.py` создаёт их при первом запуске, если они отсутствуют.

## Бэкапы без БД/дисков (опционально)
Чтобы переживать редкие деплои, можно сделать резервную копию вручную:
- Скачай файлы через **Logs/Console** недоступно на Free плане, поэтому простой путь — добавить в бота команду `/backup`, которая шлёт ZIP с `*.json` в твой Telegram (как документ). Это изменение в коде, но без сторонних сервисов.
- Для восстановления — добавить `/restore` (бот принимает ZIP и раскладывает файлы).

Если пока не хочешь менять код, просто избегай лишних деплоев (оставь `autoDeploy: false`) — данные сохранятся пока работает текущий инстанс.

## Таймзона
В `render.yaml` установлена `TZ=Europe/Amsterdam`. При необходимости замени.

## Частые вопросы
**Q: Пропали файлы после апдейта?**  
A: Был новый деплой. Это нормальное поведение Render. Либо не деплойся лишний раз, либо добавь простую команду `/backup`.

**Q: Нужен webhook?**  
A: Для простоты используем long polling. Для webhook потребуется Web Service и публичный URL/SSL.

**Q: Можно ли писать в `/tmp`?**  
A: Да, но это тоже эфемерно. Лучше хранить рядом с кодом (как сейчас).

